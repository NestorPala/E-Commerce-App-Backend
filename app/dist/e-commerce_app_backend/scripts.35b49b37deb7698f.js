const apiURL=window.location.origin+"/products";function addProduct(){let o={name:document.getElementById("product-name").value,price:document.getElementById("product-price").value},s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)};fetch(apiURL,s).then(e=>e.json()).then(e=>{alert(e.message),location.reload()})}fetch(apiURL).then(o=>o.json()).then(o=>{let s=document.getElementById("product-list");for(let d=0;d<o.length;d++){const e=document.createElement("li");e.className="product",e.id="product_"+d;const l=document.createElement("ul");for(let t in o[d]){if("_id"==t||"__v"==t||"createdAt"==t)continue;const n=document.createElement("li");n.id=e.id+"_"+t,n.innerHTML=t+": "+o[d][t],l.appendChild(n)}const i=document.createElement("button");i.id=o[d]._id,i.className="remove-product-button",i.innerHTML="X",i.addEventListener("click",function(t){fetch(apiURL+`/${i.id}`,{method:"DELETE"}).then(n=>n.json()).then(n=>{alert(n.message),location.reload()})});const c=document.createElement("button");c.id=o[d]._id,c.className="add-stock-button",c.innerHTML="ADD STOCK",c.addEventListener("click",function(t){let n=prompt("Enter amount of items for adding to stock:");fetch(apiURL+`/${c.id}/addstock`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({incomingStock:n})}).then(r=>r.json()).then(r=>{alert(r.message),location.reload()})});const a=document.createElement("button");a.id=o[d]._id,a.className="remove-stock-button",a.innerHTML="REMOVE STOCK",a.addEventListener("click",function(t){let n=prompt("Enter amount of items for removing from stock:");fetch(apiURL+`/${a.id}/removestock`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({outgoingStock:n})}).then(r=>r.json()).then(r=>{alert(r.message),location.reload()})}),e.appendChild(l),e.appendChild(i),e.appendChild(c),e.appendChild(a),s.appendChild(e),[i,c,a].forEach(t=>{t.setAttribute("style","width: fit-content; height: 30px; margin: 10px; cursor: pointer; font-family: 'Raleway', sans-serif; font-weight: bold")})}document.body.appendChild(s)});